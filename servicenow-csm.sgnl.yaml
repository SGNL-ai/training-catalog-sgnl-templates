# ServiceNow CSM Configuration YAML for DS2.0
displayName: "ServiceNow CSM"
icon: PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjMDYyRTQ0Ii8+CjxwYXRoIGZpbGwtcnVsZT0iZXZlbm9kZCIgY2xpcC1ydWxlPSJldmVub2RkIiBkPSJNNDMuMTAxNyAzOC4yODY1SDQwLjU5NDlMMzUuNTg3MiAyNS42NjI4SDM4Ljk1MzVMNDEuNjkzMSAzMi44NzNMNDQuMzkwOSAyNS42NjI4SDQ3LjIwMjJMNDkuODcwMiAzMi44NzNMNTIuNjMzNyAyNS42NjI4SDU2TDUwLjk5ODMgMzguMjg2NUg0OC40ODU1TDQ1Ljc5MzYgMzEuMDk0M0w0My4xMDE3IDM4LjI4NjVaIiBmaWxsPSJ3aGl0ZSIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTI5LjEyMzEgMjUuNDEyMUMyNy42NDUyIDI1LjQxMDYgMjYuMjAwOSAyNS44NTI3IDI0Ljk3NyAyNi42ODExQzIzLjc1MzEgMjcuNTA5NSAyMi44MDYgMjguNjg2MiAyMi4yNTgyIDMwLjA1ODhDMjEuNzEwNSAzMS40MzE1IDIxLjU4NzIgMzIuOTM2OSAyMS45MDQ1IDM0LjM4MDRDMjIuMjIxOCAzNS44MjM4IDIyLjk2NDkgMzcuMTM4OCAyNC4wMzc4IDM4LjE1NTJDMjQuMjkwMiAzOC4zOTU1IDI0LjYyMDEgMzguNTM3OCAyNC45NjgxIDM4LjU1NjRDMjUuMzE2MSAzOC41NzUgMjUuNjU5MyAzOC40Njg3IDI1LjkzNTggMzguMjU2N0MyNi44NDQzIDM3LjU3ODUgMjcuOTQ3NiAzNy4yMTIyIDI5LjA4MTMgMzcuMjEyMkMzMC4yMTUgMzcuMjEyMiAzMS4zMTgzIDM3LjU3ODUgMzIuMjI2OCAzOC4yNTY3QzMyLjUwNTcgMzguNDcwNCAzMi44NTIyIDM4LjU3NjUgMzMuMjAyOSAzOC41NTU3QzMzLjU1MzYgMzguNTM0OSAzMy44ODUxIDM4LjM4ODUgMzQuMTM2OCAzOC4xNDMzQzM1LjIwMTEgMzcuMTMwMyAzNS45MzkxIDM1LjgyMjkgMzYuMjU2MSAzNC4zODgxQzM2LjU3MzIgMzIuOTUzNCAzNi40NTQ5IDMxLjQ1NjcgMzUuOTE2NSAzMC4wODk2QzM1LjM3ODEgMjguNzIyNSAzNC40NDQxIDI3LjU0NzEgMzMuMjMzOSAyNi43MTM4QzMyLjAyMzcgMjUuODgwNSAzMC41OTI0IDI1LjQyNzMgMjkuMTIzMSAyNS40MTIxWk0yOS4wODEzIDM2LjQ3OEMyOC4zNTA4IDM2LjQ4MDQgMjcuNjM2IDM2LjI2NTggMjcuMDI3NSAzNS44NjE0QzI2LjQxOTEgMzUuNDU3IDI1Ljk0NDUgMzQuODgxIDI1LjY2MzggMzQuMjA2NUMyNS4zODMyIDMzLjUzMiAyNS4zMDkxIDMyLjc4OTQgMjUuNDUxMSAzMi4wNzI3QzI1LjU5MyAzMS4zNTYxIDI1Ljk0NDYgMzAuNjk3NyAyNi40NjExIDMwLjE4MTJDMjYuOTc3NyAyOS42NjQ2IDI3LjYzNjEgMjkuMzEzIDI4LjM1MjcgMjkuMTcxMUMyOS4wNjkzIDI5LjAyOTEgMjkuODEyIDI5LjEwMzIgMzAuNDg2NSAyOS4zODM4QzMxLjE2MSAyOS42NjQ1IDMxLjczNjkgMzAuMTM5MSAzMi4xNDEzIDMwLjc0NzZDMzIuNTQ1OCAzMS4zNTYgMzIuNzYwNCAzMi4wNzA4IDMyLjc1OCAzMi44MDEzQzMyLjc3MTIgMzMuMjg3NyAzMi42ODUxIDMzLjc3MTcgMzIuNTA1IDM0LjIyMzhDMzIuMzI0OCAzNC42NzU4IDMyLjA1NDUgMzUuMDg2NCAzMS43MTA0IDM1LjQzMDRDMzEuMzY2MyAzNS43NzQ1IDMwLjk1NTggMzYuMDQ0OCAzMC41MDM3IDM2LjIyNUMzMC4wNTE3IDM2LjQwNTEgMjkuNTY3NyAzNi40OTEyIDI5LjA4MTMgMzYuNDc4WiIgZmlsbD0iIzVFREQ1NCIvPgo8cGF0aCBmaWxsLXJ1bGU9ImV2ZW5vZGQiIGNsaXAtcnVsZT0iZXZlbm9kZCIgZD0iTTggMzguMjgwNlYyNS42NTY4SDExLjI0MVYyNi42NzE1QzEyLjI0OCAyNS44Mzk2IDEzLjUxNiAyNS4zODk0IDE0LjgyMjIgMjUuNDAwMkMxNS42NTMgMjUuMzk3IDE2LjQ3NDMgMjUuNTc3MyAxNy4yMjc1IDI1LjkyODFDMTcuOTgwNiAyNi4yNzg5IDE4LjY0NzEgMjYuNzkxNSAxOS4xNzkzIDI3LjQyOTVDMjAuMDA5IDI4LjQyMDMgMjAuNDc0NSAyOS42OTE3IDIwLjQ3NDUgMzEuODUyM1YzOC4yODA2SDE3LjEwMjJWMzEuNTk1N0MxNy4xMDIyIDMwLjM0MjIgMTYuODE1NyAyOS42OTE3IDE2LjM1MDIgMjkuMjA4MkMxNi4wOTI3IDI4Ljk3MzYgMTUuNzkxNCAyOC43OTIyIDE1LjQ2MzcgMjguNjc0NEMxNS4xMzU5IDI4LjU1NjcgMTQuNzg4MSAyOC41MDQ4IDE0LjQ0MDIgMjguNTIxOEMxMy44NDY3IDI4LjUzOTIgMTMuMjY0NSAyOC42ODg2IDEyLjczNTkgMjguOTU5MUMxMi4yMDczIDI5LjIyOTYgMTEuNzQ1NiAyOS42MTQ0IDExLjM4NDIgMzAuMDg1NlYzOC4yODA2SDhaIiBmaWxsPSJ3aGl0ZSIvPgo8L3N2Zz4K
description: "ServiceNow CSM as a System of Record"
address: "{{Input Required: Instance-Name}}.service-now.com"
defaultSyncFrequency: HOURLY
defaultSyncMinInterval: 1
defaultApiCallFrequency: SECONDLY
defaultApiCallMinInterval: 1
type: "ServiceNow-1.0.1"
# Example Config:
# {
#   "requestTimeoutSeconds": 10,
#   "apiVersion": "v2",
#   "filters": {
#     "sn_customerservice_case": "active=true^sys_updated_onRELATIVEGT@dayofweek@ago@30",
#     "sys_user": "active=true",
#     "customer_account": "active=true",
#     "sys_user_group": "active=true"
#  }
# }
adapterConfig: "ewogICJyZXF1ZXN0VGltZW91dFNlY29uZHMiOiAxMCwKICAiYXBpVmVyc2lvbiI6ICJ2MiIsCiAgImZpbHRlcnMiOiB7CiAgICAic25fY3VzdG9tZXJzZXJ2aWNlX2Nhc2UiOiAiYWN0aXZlPXRydWVec3lzX3VwZGF0ZWRfb25SRUxBVElWRUdUQGRheW9md2Vla0BhZ29AMzAiLAogICAgInN5c191c2VyIjogImFjdGl2ZT10cnVlIiwKICAgICJjdXN0b21lcl9hY2NvdW50IjogImFjdGl2ZT10cnVlIiwKICAgICJzeXNfdXNlcl9ncm91cCI6ICJhY3RpdmU9dHJ1ZSIKICB9Cn0="
# All auth mechanisms specified below must be supported by the specified Adapter.
auth:
  - basic:
      username: "{{Input Required: Username}}"
      password: "{{Input Required: Password}}"
entities:
  User:
    displayName: User
    externalId: sys_user
    description: User Entity in ServiceNow
    pageSize: 150
    pagesOrderedById: true
    attributes:
      - name: sysId
        externalId: sys_id
        description: ID of the user
        type: String
        indexed: true
        uniqueId: true
      - name: name
        externalId: name
        type: String
      - name: manager
        externalId: manager
        type: String
        indexed: true
      - name: employeeNumber
        externalId: employee_number
        type: String
        indexed: true
      - name: company
        externalId: company
        type: String
        indexed: true
      - name: email
        externalId: email
        type: String
        indexed: true
      - name: hashedUserId
        externalId: hashed_user_id
        type: String
        indexed: true
      - name: sysCreatedOn
        externalId: sys_created_on
        type: DateTime
      - name: sysCreatedBy
        externalId: sys_created_by
        type: String
      - name: sysUpdatedOn
        externalId: sys_updated_on
        type: DateTime
      - name: sysUpdatedBy
        externalId: sys_updated_by
        type: String
      - name: userName
        externalId: user_name
        type: String
      - name: firstName
        externalId: first_name
        type: String
      - name: lastName
        externalId: last_name
        type: String
      - name: middleName
        externalId: middle_name
        type: String
      - name: title
        externalId: title
        type: String
      - name: timeZone
        externalId: time_zone
        type: String
      - name: active
        externalId: active
        type: Bool
      - name: costCenter
        externalId: cost_center
        type: String
      - name: department
        externalId: department
        type: String
      - name: phone
        externalId: phone
        type: String
      - name: mobilePhone
        externalId: mobile_phone
        type: String
      - name: city
        externalId: city
        type: String
      - name: street
        externalId: street
        type: String
      - name: state
        externalId: state
        type: String
      - name: zip
        externalId: zip
        type: String
      - name: country
        externalId: country
        type: String
      - name: location
        externalId: location
        type: String
      - name: enableMultifactorAuthn
        externalId: enable_multifactor_authn
        type: Bool
      - name: failedAttempts
        externalId: failed_attempts
        type: String
      - name: lastLogin
        externalId: last_login
        type: DateTime
      - name: lastLoginDevice
        externalId: last_login_device
        type: String
      - name: lastLoginTime
        externalId: last_login_time
        type: DateTime

  Group:
    displayName: Group
    externalId: sys_user_group
    description: Group Entity in ServiceNow
    pageSize: 150
    pagesOrderedById: true
    attributes:
      - name: sysId
        externalId: sys_id
        description: ID of the group
        type: String
        indexed: true
        uniqueId: true
      - name: parent
        externalId: parent
        type: String
        indexed: true
      - name: defaultAssignee
        externalId: default_assignee
        type: String
        indexed: true
      - name: name
        externalId: name
        type: String
        indexed: true
      - name: manager
        externalId: manager
        type: String
        indexed: true
      - name: sysCreatedOn
        externalId: sys_created_on
        type: DateTime
      - name: sysCreatedBy
        externalId: sys_created_by
        type: String
      - name: sysUpdatedOn
        externalId: sys_updated_on
        type: DateTime
      - name: sysUpdatedBy
        externalId: sys_updated_by
        type: String
      - name: type
        type: String
        externalId: type
      - name: email
        externalId: email
        type: String
      - name: roles
        externalId: roles
        type: String
      - name: costCenter
        externalId: cost_center
        type: String
      - name: active
        externalId: active
        type: Bool
      - name: excludeManager
        externalId: exclude_manager
        type: Bool
      - name: includeMembers
        externalId: include_members
        type: Bool

  GroupMember:
    displayName: GroupMember
    externalId: sys_user_grmember
    description: GroupMember Entity in ServiceNow
    pageSize: 150
    pagesOrderedById: true
    attributes:
      - name: sysId
        externalId: sys_id
        description: ID of the group meber
        type: String
        indexed: true
        uniqueId: true
      - name: user
        externalId: user
        type: String
        indexed: true
        required: true
      - name: group
        externalId: group
        type: String
        indexed: true
        required: true
      - name: sysCreatedOn
        externalId: sys_created_on
        type: DateTime
      - name: sysCreatedBy
        externalId: sys_created_by
        type: String
      - name: sysUpdatedOn
        externalId: sys_updated_on
        type: DateTime
      - name: sysUpdatedBy
        externalId: sys_updated_by
        type: String
  Case:
    displayName: Case
    externalId: sn_customerservice_case
    description: Case Entity in ServiceNow
    pageSize: 350
    pagesOrderedById: true
    attributes:
      - name: sysId
        externalId: sys_id
        description: ID of the case
        type: String
        indexed: true
        uniqueId: true
      - name: account
        externalId: account
        type: String
        indexed: true
      - name: assignedTo
        externalId: assigned_to
        type: String
        indexed: true
      - name: company
        externalId: company
        type: String
        indexed: true
      - name: contributorUsers
        externalId: contributorUsers
        type: String
        indexed: true
      - name: number
        externalId: number
        type: String
        indexed: true
      - name: parent
        externalId: parent
        type: String
        indexed: true
      - name: sysCreatedOn
        externalId: sys_created_on
        type: DateTime
      - name: sysCreatedBy
        externalId: sys_created_by
        type: String
      - name: sysUpdatedOn
        externalId: sys_updated_on
        type: DateTime
      - name: sysUpdatedBy
        externalId: sys_updated_by
        type: String
      - name: active
        externalId: active
        type: Bool
      - name: activeEscalation
        externalId: active_escalation
        type: String
      - name: asset
        externalId: asset
        type: String
      - name: assignedOn
        externalId: assigned_on
        type: DateTime
      - name: assignmentGroup
        externalId: assignment_group
        type: String
      - name: businessImpact
        externalId: business_impact
        type: String
      - name: case
        externalId: case
        type: String
      - name: causedBy
        externalId: caused_by
        type: String
      - name: change
        externalId: change
        type: String
      - name: closedAt
        externalId: closed_at
        type: DateTime
      - name: closedBy
        externalId: closed_by
        type: String
      - name: closeNotes
        externalId: close_notes
        type: String
      - name: description
        externalId: description
        type: String
      - name: entitlement
        externalId: entitlement
        type: String
      - name: incident
        externalId: incident
        type: String
      - name: openedAt
        externalId: opened_at
        type: DateTime
      - name: openedBy
        externalId: opened_by
        type: String
      - name: priority
        externalId: priority
        type: String
      - name: problem
        externalId: problem
        type: String
      - name: product
        externalId: product
        type: String
      - name: resolutionCode
        externalId: resolution_code
        type: String
      - name: resolvedAt
        externalId: resolved_at
        type: DateTime
      - name: resolvedBy
        externalId: resolved_by
        type: String
      - name: shortDescription
        externalId: short_description
        type: String
      - name: stage
        externalId: stage
        type: String
      - name: state
        externalId: state
        type: String
      - name: activityDue
        externalId: activity_due
        type: DateTime
      - name: approval
        externalId: approval
        type: String
      - name: approvalHistory
        externalId: approval_history
        type: String
      - name: approvalSet
        externalId: approval_set
        type: DateTime
      - name: cmdbCi
        externalId: cmdb_ci
        type: String
      - name: dueDate
        externalId: due_date
        type: DateTime
      - name: escalation
        externalId: escalation
        type: String
      - name: expectedStart
        externalId: expected_start
        type: DateTime
      - name: impact
        externalId: impact
        type: String
      - name: location
        externalId: location
        type: String
      - name: slaDue
        externalId: sla_due
        type: DateTime
      - name: timeWorked
        externalId: time_worked
        type: DateTime
      - name: urgency
        externalId: urgency
        type: String
      - name: workEnd
        externalId: work_end
        type: DateTime
      - name: workStart
        externalId: work_start
        type: DateTime
  Account:
    displayName: Account
    externalId: customer_account
    description: Account Entity in ServiceNow
    pageSize: 350
    pagesOrderedById: true
    attributes:
      - name: sysId
        externalId: sys_id
        description: ID of the account
        type: String
        indexed: true
        uniqueId: true
      - name: parent
        externalId: parent
        type: String
        indexed: true
      - name: accountParent
        externalId: account_parent
        type: String
        indexed: true
      - name: number
        externalId: number
        type: String
        indexed: true
      - name: name
        externalId: name
        type: String
      - name: sysClassName
        externalId: sys_class_name
        type: String
      - name: sysCreatedOn
        externalId: sys_created_on
        type: DateTime
      - name: sysCreatedBy
        externalId: sys_created_by
        type: String
      - name: sysUpdatedOn
        externalId: sys_updated_on
        type: DateTime
      - name: sysUpdatedBy
        externalId: sys_updated_by
        type: String
      - name: sysModCount
        externalId: sys_mod_count
        type: String
      - name: sysTags
        externalId: sys_tags
        type: String
      - name: city
        externalId: city
        type: String
      - name: contact
        externalId: contact
        type: String
      - name: country
        externalId: country
        type: String
      - name: customer
        externalId: customer
        type: Bool
      - name: notes
        externalId: notes
        type: String
      - name: phone
        externalId: phone
        type: String
      - name: state
        externalId: state
        type: String
      - name: stockSymbol
        externalId: stock_symbol
        type: String
      - name: street
        externalId: street
        type: String
      - name: theme
        externalId: theme
        type: String
      - name: vendor
        externalId: vendor
        type: Bool
      - name: zip
        externalId: zip
        type: String
      - name: accountCode
        externalId: account_code
        type: String
      - name: accountPath
        externalId: account_path
        type: String
      - name: activeEscalation
        externalId: active_escalation
        type: String
      - name: primaryContact
        externalId: primary_contact
        type: String

relationships:
  UserManager:
    name: Manager
    displayName: User Manager
    fromAttribute: sys_user.manager
    toAttribute: sys_user.sys_id
  GroupManager:
    name: Manager
    displayName: Group Manager
    fromAttribute: sys_user_group.manager
    toAttribute: sys_user.sys_id
  CaseParent:
    name: Parent
    displayName: Case Parent
    fromAttribute: sn_customerservice_case.parent
    toAttribute: sn_customerservice_case.sys_id
  AccountParent:
    name: Parent
    displayName: Account Parent
    fromAttribute: customer_account.account_parent
    toAttribute: customer_account.sys_id
  GroupParent:
    name: Parent
    displayName: Group Parent
    fromAttribute: sys_user_group.parent
    toAttribute: sys_user_group.sys_id
  CaseAssignedTo:
    name: AssignedTo
    displayName: Case Assigned To
    fromAttribute: sn_customerservice_case.assigned_to
    toAttribute: sys_user.sys_id
  CaseAccount:
    name: Account
    displayName: Case Account
    fromAttribute: sn_customerservice_case.account
    toAttribute: customer_account.sys_id
  GroupDefaultAssignee:
    name: DefaultAssignee
    displayName: Group Default Assignee
    fromAttribute: sys_user_group.default_assignee
    toAttribute: sys_user.sys_id
  MemberOfAssignmentGroup:
    name: MemberOfAssignmentGroup
    displayName: Member Of Assignment Group
    fromAttribute: sys_user.sys_id
    toAttribute: sys_user_grmember.user
  AssignmentGroupToGroupMember:
    name: AssignmentGroupToGroupMember
    displayName: Assignment Group To Group Member
    fromAttribute: sys_user_group.sys_id
    toAttribute: sys_user_grmember.group
  UserInGroup:
    name: UserInGroup
    displayName: User In Group
    path:
      - relationship: MemberOfAssignmentGroup
        direction: Forward
      - relationship: AssignmentGroupToGroupMember
        direction: Backward
